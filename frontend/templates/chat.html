<!DOCTYPE html>
<html>
<head>
    <title>Bhagavad Gita Chatbot</title>
    <link rel="stylesheet" href="/static/style.css">
</head>

<body>

<div class="chat-container">

    <h2>ðŸ•‰ Bhagavad Gita RAG Chatbot</h2>

    <div id="chat-box"></div>

    <div class="input-area">
        <input type="text" id="user-input" placeholder="Ask your question...">
        <button onclick="sendMessage()">Send</button>
    </div>

</div>

<script>

async function sendMessage(){

    let input = document.getElementById("user-input");
    let message = input.value;

    if(message.trim() === "") return;

    let chatBox = document.getElementById("chat-box");

    // show user message
    chatBox.innerHTML += `<div class='user'>${message}</div>`;

    input.value = "";

    let response = await fetch("/ask", {
        method:"POST",
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({message:message})
    });

    let data = await response.json();

    // show bot response
    chatBox.innerHTML += `<div class='bot'>${data.reply}</div>`;

    chatBox.scrollTop = chatBox.scrollHeight;
}

// ENTER KEY SUPPORT
document.getElementById("user-input").addEventListener("keypress", function(e){
    if(e.key === "Enter"){
        sendMessage();
    }
});

</script>

</body>
</html>